{"ast":null,"code":"import _slicedToArray from \"/Users/national/Documents/user/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _typeof from \"/Users/national/Documents/user/node_modules/@babel/runtime/helpers/esm/typeof.js\";\nimport _objectSpread from \"/Users/national/Documents/user/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.trim.js\";\nimport \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.array.find.js\";\nimport \"core-js/modules/es.array.find-index.js\";\nimport \"core-js/modules/es.array.splice.js\";\nimport \"core-js/modules/es.array.sort.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.from.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"../../../src/components/VDataTable/VDataTable.sass\"; // Components\n\nimport { VData } from '../VData';\nimport { VDataFooter, VDataIterator } from '../VDataIterator';\nimport VBtn from '../VBtn';\nimport VDataTableHeader from './VDataTableHeader'; // import VVirtualTable from './VVirtualTable'\n\nimport VIcon from '../VIcon';\nimport Row from './Row';\nimport RowGroup from './RowGroup';\nimport VSimpleCheckbox from '../VCheckbox/VSimpleCheckbox';\nimport VSimpleTable from './VSimpleTable';\nimport MobileRow from './MobileRow'; // Mixins\n\nimport Loadable from '../../mixins/loadable'; // Directives\n\nimport ripple from '../../directives/ripple'; // Helpers\n\nimport mixins from '../../util/mixins';\nimport { deepEqual, getObjectValueByPath, getPrefixedScopedSlots, getSlot, defaultFilter, camelizeObjectKeys, getPropertyFromItem } from '../../util/helpers';\nimport { breaking } from '../../util/console';\nimport { mergeClasses } from '../../util/mergeData';\n\nfunction filterFn(item, search, filter) {\n  return function (header) {\n    var value = getObjectValueByPath(item, header.value);\n    return header.filter ? header.filter(value, search, item) : filter(value, search, item);\n  };\n}\n\nfunction searchTableItems(items, search, headersWithCustomFilters, headersWithoutCustomFilters, customFilter) {\n  search = typeof search === 'string' ? search.trim() : null;\n  return items.filter(function (item) {\n    // Headers with custom filters are evaluated whether or not a search term has been provided.\n    // We need to match every filter to be included in the results.\n    var matchesColumnFilters = headersWithCustomFilters.every(filterFn(item, search, defaultFilter)); // Headers without custom filters are only filtered by the `search` property if it is defined.\n    // We only need a single column to match the search term to be included in the results.\n\n    var matchesSearchTerm = !search || headersWithoutCustomFilters.some(filterFn(item, search, customFilter));\n    return matchesColumnFilters && matchesSearchTerm;\n  });\n}\n/* @vue/component */\n\n\nexport default mixins(VDataIterator, Loadable).extend({\n  name: 'v-data-table',\n  // https://github.com/vuejs/vue/issues/6872\n  directives: {\n    ripple: ripple\n  },\n  props: {\n    headers: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    },\n    showSelect: Boolean,\n    checkboxColor: String,\n    showExpand: Boolean,\n    showGroupBy: Boolean,\n    // TODO: Fix\n    // virtualRows: Boolean,\n    height: [Number, String],\n    hideDefaultHeader: Boolean,\n    caption: String,\n    dense: Boolean,\n    headerProps: Object,\n    calculateWidths: Boolean,\n    fixedHeader: Boolean,\n    headersLength: Number,\n    expandIcon: {\n      type: String,\n      default: '$expand'\n    },\n    customFilter: {\n      type: Function,\n      default: defaultFilter\n    },\n    itemClass: {\n      type: [String, Function],\n      default: function _default() {\n        return '';\n      }\n    },\n    loaderHeight: {\n      type: [Number, String],\n      default: 4\n    }\n  },\n  data: function data() {\n    return {\n      internalGroupBy: [],\n      openCache: {},\n      widths: []\n    };\n  },\n  computed: {\n    computedHeaders: function computedHeaders() {\n      var _this = this;\n\n      if (!this.headers) return [];\n      var headers = this.headers.filter(function (h) {\n        return h.value === undefined || !_this.internalGroupBy.find(function (v) {\n          return v === h.value;\n        });\n      });\n      var defaultHeader = {\n        text: '',\n        sortable: false,\n        width: '1px'\n      };\n\n      if (this.showSelect) {\n        var index = headers.findIndex(function (h) {\n          return h.value === 'data-table-select';\n        });\n        if (index < 0) headers.unshift(_objectSpread(_objectSpread({}, defaultHeader), {}, {\n          value: 'data-table-select'\n        }));else headers.splice(index, 1, _objectSpread(_objectSpread({}, defaultHeader), headers[index]));\n      }\n\n      if (this.showExpand) {\n        var _index = headers.findIndex(function (h) {\n          return h.value === 'data-table-expand';\n        });\n\n        if (_index < 0) headers.unshift(_objectSpread(_objectSpread({}, defaultHeader), {}, {\n          value: 'data-table-expand'\n        }));else headers.splice(_index, 1, _objectSpread(_objectSpread({}, defaultHeader), headers[_index]));\n      }\n\n      return headers;\n    },\n    colspanAttrs: function colspanAttrs() {\n      return this.isMobile ? undefined : {\n        colspan: this.headersLength || this.computedHeaders.length\n      };\n    },\n    columnSorters: function columnSorters() {\n      return this.computedHeaders.reduce(function (acc, header) {\n        if (header.sort) acc[header.value] = header.sort;\n        return acc;\n      }, {});\n    },\n    headersWithCustomFilters: function headersWithCustomFilters() {\n      return this.headers.filter(function (header) {\n        return header.filter && (!header.hasOwnProperty('filterable') || header.filterable === true);\n      });\n    },\n    headersWithoutCustomFilters: function headersWithoutCustomFilters() {\n      return this.headers.filter(function (header) {\n        return !header.filter && (!header.hasOwnProperty('filterable') || header.filterable === true);\n      });\n    },\n    sanitizedHeaderProps: function sanitizedHeaderProps() {\n      return camelizeObjectKeys(this.headerProps);\n    },\n    computedItemsPerPage: function computedItemsPerPage() {\n      var itemsPerPage = this.options && this.options.itemsPerPage ? this.options.itemsPerPage : this.itemsPerPage;\n      var itemsPerPageOptions = this.sanitizedFooterProps.itemsPerPageOptions;\n\n      if (itemsPerPageOptions && !itemsPerPageOptions.find(function (item) {\n        return typeof item === 'number' ? item === itemsPerPage : item.value === itemsPerPage;\n      })) {\n        var firstOption = itemsPerPageOptions[0];\n        return _typeof(firstOption) === 'object' ? firstOption.value : firstOption;\n      }\n\n      return itemsPerPage;\n    }\n  },\n  created: function created() {\n    var _this2 = this;\n\n    var breakingProps = [['sort-icon', 'header-props.sort-icon'], ['hide-headers', 'hide-default-header'], ['select-all', 'show-select']];\n    /* istanbul ignore next */\n\n    breakingProps.forEach(function (_ref) {\n      var _ref2 = _slicedToArray(_ref, 2),\n          original = _ref2[0],\n          replacement = _ref2[1];\n\n      if (_this2.$attrs.hasOwnProperty(original)) breaking(original, replacement, _this2);\n    });\n  },\n  mounted: function mounted() {\n    // if ((!this.sortBy || !this.sortBy.length) && (!this.options.sortBy || !this.options.sortBy.length)) {\n    //   const firstSortable = this.headers.find(h => !('sortable' in h) || !!h.sortable)\n    //   if (firstSortable) this.updateOptions({ sortBy: [firstSortable.value], sortDesc: [false] })\n    // }\n    if (this.calculateWidths) {\n      window.addEventListener('resize', this.calcWidths);\n      this.calcWidths();\n    }\n  },\n  beforeDestroy: function beforeDestroy() {\n    if (this.calculateWidths) {\n      window.removeEventListener('resize', this.calcWidths);\n    }\n  },\n  methods: {\n    calcWidths: function calcWidths() {\n      this.widths = Array.from(this.$el.querySelectorAll('th')).map(function (e) {\n        return e.clientWidth;\n      });\n    },\n    customFilterWithColumns: function customFilterWithColumns(items, search) {\n      return searchTableItems(items, search, this.headersWithCustomFilters, this.headersWithoutCustomFilters, this.customFilter);\n    },\n    customSortWithHeaders: function customSortWithHeaders(items, sortBy, sortDesc, locale) {\n      return this.customSort(items, sortBy, sortDesc, locale, this.columnSorters);\n    },\n    createItemProps: function createItemProps(item, index) {\n      var props = VDataIterator.options.methods.createItemProps.call(this, item, index);\n      return Object.assign(props, {\n        headers: this.computedHeaders\n      });\n    },\n    genCaption: function genCaption(props) {\n      if (this.caption) return [this.$createElement('caption', [this.caption])];\n      return getSlot(this, 'caption', props, true);\n    },\n    genColgroup: function genColgroup(props) {\n      var _this3 = this;\n\n      return this.$createElement('colgroup', this.computedHeaders.map(function (header) {\n        return _this3.$createElement('col', {\n          class: {\n            divider: header.divider\n          }\n        });\n      }));\n    },\n    genLoading: function genLoading() {\n      var th = this.$createElement('th', {\n        staticClass: 'column',\n        attrs: this.colspanAttrs\n      }, [this.genProgress()]);\n      var tr = this.$createElement('tr', {\n        staticClass: 'v-data-table__progress'\n      }, [th]);\n      return this.$createElement('thead', [tr]);\n    },\n    genHeaders: function genHeaders(props) {\n      var data = {\n        props: _objectSpread(_objectSpread({}, this.sanitizedHeaderProps), {}, {\n          headers: this.computedHeaders,\n          options: props.options,\n          mobile: this.isMobile,\n          showGroupBy: this.showGroupBy,\n          checkboxColor: this.checkboxColor,\n          someItems: this.someItems,\n          everyItem: this.everyItem,\n          singleSelect: this.singleSelect,\n          disableSort: this.disableSort\n        }),\n        on: {\n          sort: props.sort,\n          group: props.group,\n          'toggle-select-all': this.toggleSelectAll\n        }\n      }; // TODO: rename to 'head'? (thead, tbody, tfoot)\n\n      var children = [getSlot(this, 'header', _objectSpread(_objectSpread({}, data), {}, {\n        isMobile: this.isMobile\n      }))];\n\n      if (!this.hideDefaultHeader) {\n        var scopedSlots = getPrefixedScopedSlots('header.', this.$scopedSlots);\n        children.push(this.$createElement(VDataTableHeader, _objectSpread(_objectSpread({}, data), {}, {\n          scopedSlots: scopedSlots\n        })));\n      }\n\n      if (this.loading) children.push(this.genLoading());\n      return children;\n    },\n    genEmptyWrapper: function genEmptyWrapper(content) {\n      return this.$createElement('tr', {\n        staticClass: 'v-data-table__empty-wrapper'\n      }, [this.$createElement('td', {\n        attrs: this.colspanAttrs\n      }, content)]);\n    },\n    genItems: function genItems(items, props) {\n      var empty = this.genEmpty(props.originalItemsLength, props.pagination.itemsLength);\n      if (empty) return [empty];\n      return props.groupedItems ? this.genGroupedRows(props.groupedItems, props) : this.genRows(items, props);\n    },\n    genGroupedRows: function genGroupedRows(groupedItems, props) {\n      var _this4 = this;\n\n      return groupedItems.map(function (group) {\n        if (!_this4.openCache.hasOwnProperty(group.name)) _this4.$set(_this4.openCache, group.name, true);\n\n        if (_this4.$scopedSlots.group) {\n          return _this4.$scopedSlots.group({\n            group: group.name,\n            options: props.options,\n            isMobile: _this4.isMobile,\n            items: group.items,\n            headers: _this4.computedHeaders\n          });\n        } else {\n          return _this4.genDefaultGroupedRow(group.name, group.items, props);\n        }\n      });\n    },\n    genDefaultGroupedRow: function genDefaultGroupedRow(group, items, props) {\n      var _this5 = this;\n\n      var isOpen = !!this.openCache[group];\n      var children = [this.$createElement('template', {\n        slot: 'row.content'\n      }, this.genRows(items, props))];\n\n      var toggleFn = function toggleFn() {\n        return _this5.$set(_this5.openCache, group, !_this5.openCache[group]);\n      };\n\n      var removeFn = function removeFn() {\n        return props.updateOptions({\n          groupBy: [],\n          groupDesc: []\n        });\n      };\n\n      if (this.$scopedSlots['group.header']) {\n        children.unshift(this.$createElement('template', {\n          slot: 'column.header'\n        }, [this.$scopedSlots['group.header']({\n          group: group,\n          groupBy: props.options.groupBy,\n          isMobile: this.isMobile,\n          items: items,\n          headers: this.computedHeaders,\n          isOpen: isOpen,\n          toggle: toggleFn,\n          remove: removeFn\n        })]));\n      } else {\n        var toggle = this.$createElement(VBtn, {\n          staticClass: 'ma-0',\n          props: {\n            icon: true,\n            small: true\n          },\n          on: {\n            click: toggleFn\n          }\n        }, [this.$createElement(VIcon, [isOpen ? '$minus' : '$plus'])]);\n        var remove = this.$createElement(VBtn, {\n          staticClass: 'ma-0',\n          props: {\n            icon: true,\n            small: true\n          },\n          on: {\n            click: removeFn\n          }\n        }, [this.$createElement(VIcon, ['$close'])]);\n        var column = this.$createElement('td', {\n          staticClass: 'text-start',\n          attrs: this.colspanAttrs\n        }, [toggle, \"\".concat(props.options.groupBy[0], \": \").concat(group), remove]);\n        children.unshift(this.$createElement('template', {\n          slot: 'column.header'\n        }, [column]));\n      }\n\n      if (this.$scopedSlots['group.summary']) {\n        children.push(this.$createElement('template', {\n          slot: 'column.summary'\n        }, [this.$scopedSlots['group.summary']({\n          group: group,\n          groupBy: props.options.groupBy,\n          isMobile: this.isMobile,\n          items: items,\n          headers: this.computedHeaders,\n          isOpen: isOpen,\n          toggle: toggleFn\n        })]));\n      }\n\n      return this.$createElement(RowGroup, {\n        key: group,\n        props: {\n          value: isOpen\n        }\n      }, children);\n    },\n    genRows: function genRows(items, props) {\n      return this.$scopedSlots.item ? this.genScopedRows(items, props) : this.genDefaultRows(items, props);\n    },\n    genScopedRows: function genScopedRows(items, props) {\n      var rows = [];\n\n      for (var i = 0; i < items.length; i++) {\n        var item = items[i];\n        rows.push(this.$scopedSlots.item(_objectSpread(_objectSpread({}, this.createItemProps(item, i)), {}, {\n          isMobile: this.isMobile\n        })));\n\n        if (this.isExpanded(item)) {\n          rows.push(this.$scopedSlots['expanded-item']({\n            headers: this.computedHeaders,\n            isMobile: this.isMobile,\n            index: i,\n            item: item\n          }));\n        }\n      }\n\n      return rows;\n    },\n    genDefaultRows: function genDefaultRows(items, props) {\n      var _this6 = this;\n\n      return this.$scopedSlots['expanded-item'] ? items.map(function (item, index) {\n        return _this6.genDefaultExpandedRow(item, index);\n      }) : items.map(function (item, index) {\n        return _this6.genDefaultSimpleRow(item, index);\n      });\n    },\n    genDefaultExpandedRow: function genDefaultExpandedRow(item, index) {\n      var isExpanded = this.isExpanded(item);\n      var classes = {\n        'v-data-table__expanded v-data-table__expanded__row': isExpanded\n      };\n      var headerRow = this.genDefaultSimpleRow(item, index, classes);\n      var expandedRow = this.$createElement('tr', {\n        staticClass: 'v-data-table__expanded v-data-table__expanded__content'\n      }, [this.$scopedSlots['expanded-item']({\n        headers: this.computedHeaders,\n        isMobile: this.isMobile,\n        item: item\n      })]);\n      return this.$createElement(RowGroup, {\n        props: {\n          value: isExpanded\n        }\n      }, [this.$createElement('template', {\n        slot: 'row.header'\n      }, [headerRow]), this.$createElement('template', {\n        slot: 'row.content'\n      }, [expandedRow])]);\n    },\n    genDefaultSimpleRow: function genDefaultSimpleRow(item, index) {\n      var _this7 = this;\n\n      var classes = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var scopedSlots = getPrefixedScopedSlots('item.', this.$scopedSlots);\n      var data = this.createItemProps(item, index);\n\n      if (this.showSelect) {\n        var slot = scopedSlots['data-table-select'];\n        scopedSlots['data-table-select'] = slot ? function () {\n          return slot(_objectSpread(_objectSpread({}, data), {}, {\n            isMobile: _this7.isMobile\n          }));\n        } : function () {\n          var _this$checkboxColor;\n\n          return _this7.$createElement(VSimpleCheckbox, {\n            staticClass: 'v-data-table__checkbox',\n            props: {\n              value: data.isSelected,\n              disabled: !_this7.isSelectable(item),\n              color: (_this$checkboxColor = _this7.checkboxColor) != null ? _this$checkboxColor : ''\n            },\n            on: {\n              input: function input(val) {\n                return data.select(val);\n              }\n            }\n          });\n        };\n      }\n\n      if (this.showExpand) {\n        var _slot = scopedSlots['data-table-expand'];\n        scopedSlots['data-table-expand'] = _slot ? function () {\n          return _slot(data);\n        } : function () {\n          return _this7.$createElement(VIcon, {\n            staticClass: 'v-data-table__expand-icon',\n            class: {\n              'v-data-table__expand-icon--active': data.isExpanded\n            },\n            on: {\n              click: function click(e) {\n                e.stopPropagation();\n                data.expand(!data.isExpanded);\n              }\n            }\n          }, [_this7.expandIcon]);\n        };\n      }\n\n      return this.$createElement(this.isMobile ? MobileRow : Row, {\n        key: getObjectValueByPath(item, this.itemKey),\n        class: mergeClasses(_objectSpread(_objectSpread({}, classes), {}, {\n          'v-data-table__selected': data.isSelected\n        }), getPropertyFromItem(item, this.itemClass)),\n        props: {\n          headers: this.computedHeaders,\n          hideDefaultHeader: this.hideDefaultHeader,\n          index: index,\n          item: item,\n          rtl: this.$vuetify.rtl\n        },\n        scopedSlots: scopedSlots,\n        on: {\n          // TODO: for click, the first argument should be the event, and the second argument should be data,\n          // but this is a breaking change so it's for v3\n          click: function click() {\n            return _this7.$emit('click:row', item, data);\n          },\n          contextmenu: function contextmenu(event) {\n            return _this7.$emit('contextmenu:row', event, data);\n          },\n          dblclick: function dblclick(event) {\n            return _this7.$emit('dblclick:row', event, data);\n          }\n        }\n      });\n    },\n    genBody: function genBody(props) {\n      var data = _objectSpread(_objectSpread({}, props), {}, {\n        expand: this.expand,\n        headers: this.computedHeaders,\n        isExpanded: this.isExpanded,\n        isMobile: this.isMobile,\n        isSelected: this.isSelected,\n        select: this.select\n      });\n\n      if (this.$scopedSlots.body) {\n        return this.$scopedSlots.body(data);\n      }\n\n      return this.$createElement('tbody', [getSlot(this, 'body.prepend', data, true), this.genItems(props.items, props), getSlot(this, 'body.append', data, true)]);\n    },\n    genFoot: function genFoot(props) {\n      var _this$$scopedSlots$fo, _this$$scopedSlots;\n\n      return (_this$$scopedSlots$fo = (_this$$scopedSlots = this.$scopedSlots).foot) == null ? void 0 : _this$$scopedSlots$fo.call(_this$$scopedSlots, props);\n    },\n    genFooters: function genFooters(props) {\n      var data = {\n        props: _objectSpread({\n          options: props.options,\n          pagination: props.pagination,\n          itemsPerPageText: '$vuetify.dataTable.itemsPerPageText'\n        }, this.sanitizedFooterProps),\n        on: {\n          'update:options': function updateOptions(value) {\n            return props.updateOptions(value);\n          }\n        },\n        widths: this.widths,\n        headers: this.computedHeaders\n      };\n      var children = [getSlot(this, 'footer', data, true)];\n\n      if (!this.hideDefaultFooter) {\n        children.push(this.$createElement(VDataFooter, _objectSpread(_objectSpread({}, data), {}, {\n          scopedSlots: getPrefixedScopedSlots('footer.', this.$scopedSlots)\n        })));\n      }\n\n      return children;\n    },\n    genDefaultScopedSlot: function genDefaultScopedSlot(props) {\n      var simpleProps = {\n        height: this.height,\n        fixedHeader: this.fixedHeader,\n        dense: this.dense\n      }; // if (this.virtualRows) {\n      //   return this.$createElement(VVirtualTable, {\n      //     props: Object.assign(simpleProps, {\n      //       items: props.items,\n      //       height: this.height,\n      //       rowHeight: this.dense ? 24 : 48,\n      //       headerHeight: this.dense ? 32 : 48,\n      //       // TODO: expose rest of props from virtual table?\n      //     }),\n      //     scopedSlots: {\n      //       items: ({ items }) => this.genItems(items, props) as any,\n      //     },\n      //   }, [\n      //     this.proxySlot('body.before', [this.genCaption(props), this.genHeaders(props)]),\n      //     this.proxySlot('bottom', this.genFooters(props)),\n      //   ])\n      // }\n\n      return this.$createElement(VSimpleTable, {\n        props: simpleProps,\n        class: {\n          'v-data-table--mobile': this.isMobile\n        }\n      }, [this.proxySlot('top', getSlot(this, 'top', _objectSpread(_objectSpread({}, props), {}, {\n        isMobile: this.isMobile\n      }), true)), this.genCaption(props), this.genColgroup(props), this.genHeaders(props), this.genBody(props), this.genFoot(props), this.proxySlot('bottom', this.genFooters(props))]);\n    },\n    proxySlot: function proxySlot(slot, content) {\n      return this.$createElement('template', {\n        slot: slot\n      }, content);\n    }\n  },\n  render: function render() {\n    var _this8 = this;\n\n    return this.$createElement(VData, {\n      props: _objectSpread(_objectSpread({}, this.$props), {}, {\n        customFilter: this.customFilterWithColumns,\n        customSort: this.customSortWithHeaders,\n        itemsPerPage: this.computedItemsPerPage\n      }),\n      on: {\n        'update:options': function updateOptions(v, old) {\n          _this8.internalGroupBy = v.groupBy || [];\n          !deepEqual(v, old) && _this8.$emit('update:options', v);\n        },\n        'update:page': function updatePage(v) {\n          return _this8.$emit('update:page', v);\n        },\n        'update:items-per-page': function updateItemsPerPage(v) {\n          return _this8.$emit('update:items-per-page', v);\n        },\n        'update:sort-by': function updateSortBy(v) {\n          return _this8.$emit('update:sort-by', v);\n        },\n        'update:sort-desc': function updateSortDesc(v) {\n          return _this8.$emit('update:sort-desc', v);\n        },\n        'update:group-by': function updateGroupBy(v) {\n          return _this8.$emit('update:group-by', v);\n        },\n        'update:group-desc': function updateGroupDesc(v) {\n          return _this8.$emit('update:group-desc', v);\n        },\n        pagination: function pagination(v, old) {\n          return !deepEqual(v, old) && _this8.$emit('pagination', v);\n        },\n        'current-items': function currentItems(v) {\n          _this8.internalCurrentItems = v;\n\n          _this8.$emit('current-items', v);\n        },\n        'page-count': function pageCount(v) {\n          return _this8.$emit('page-count', v);\n        }\n      },\n      scopedSlots: {\n        default: this.genDefaultScopedSlot\n      }\n    });\n  }\n});","map":{"version":3,"mappings":"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","names":["VData","VDataFooter","VDataIterator","VBtn","VDataTableHeader","VIcon","Row","RowGroup","VSimpleCheckbox","VSimpleTable","MobileRow","Loadable","ripple","mixins","deepEqual","getObjectValueByPath","getPrefixedScopedSlots","getSlot","defaultFilter","camelizeObjectKeys","getPropertyFromItem","breaking","mergeClasses","filterFn","item","search","filter","value","header","searchTableItems","items","headersWithCustomFilters","headersWithoutCustomFilters","customFilter","trim","matchesColumnFilters","every","matchesSearchTerm","some","extend","name","directives","props","headers","type","Array","default","showSelect","Boolean","checkboxColor","String","showExpand","showGroupBy","height","Number","hideDefaultHeader","caption","dense","headerProps","Object","calculateWidths","fixedHeader","headersLength","expandIcon","Function","itemClass","loaderHeight","data","internalGroupBy","openCache","widths","computed","computedHeaders","h","undefined","find","v","defaultHeader","text","sortable","width","index","findIndex","unshift","splice","colspanAttrs","isMobile","colspan","length","columnSorters","reduce","acc","sort","hasOwnProperty","filterable","sanitizedHeaderProps","computedItemsPerPage","itemsPerPage","options","itemsPerPageOptions","sanitizedFooterProps","firstOption","created","breakingProps","forEach","original","replacement","$attrs","mounted","window","addEventListener","calcWidths","beforeDestroy","removeEventListener","methods","from","$el","querySelectorAll","map","e","clientWidth","customFilterWithColumns","customSortWithHeaders","sortBy","sortDesc","locale","customSort","createItemProps","call","assign","genCaption","$createElement","genColgroup","class","divider","genLoading","th","staticClass","attrs","genProgress","tr","genHeaders","mobile","someItems","everyItem","singleSelect","disableSort","on","group","toggleSelectAll","children","scopedSlots","$scopedSlots","push","loading","genEmptyWrapper","content","genItems","empty","genEmpty","originalItemsLength","pagination","itemsLength","groupedItems","genGroupedRows","genRows","$set","genDefaultGroupedRow","isOpen","slot","toggleFn","removeFn","updateOptions","groupBy","groupDesc","toggle","remove","icon","small","click","column","key","genScopedRows","genDefaultRows","rows","i","isExpanded","genDefaultExpandedRow","genDefaultSimpleRow","classes","headerRow","expandedRow","isSelected","disabled","isSelectable","color","input","select","val","stopPropagation","expand","itemKey","rtl","$vuetify","$emit","contextmenu","event","dblclick","genBody","body","genFoot","foot","_this$$scopedSlots$fo","genFooters","itemsPerPageText","hideDefaultFooter","genDefaultScopedSlot","simpleProps","proxySlot","render","$props","old","internalCurrentItems"],"sourceRoot":"","sources":["../../../src/components/VDataTable/VDataTable.ts"],"sourcesContent":["import './VDataTable.sass'\n\n// Types\nimport { VNode, VNodeChildrenArrayContents, VNodeChildren } from 'vue'\nimport { PropValidator } from 'vue/types/options'\nimport {\n  DataTableHeader,\n  DataTableFilterFunction,\n  DataScopeProps,\n  DataOptions,\n  DataPagination,\n  DataTableCompareFunction,\n  DataItemsPerPageOption,\n  ItemGroup,\n  RowClassFunction,\n  DataTableItemProps,\n} from 'vuetify/types'\n\n// Components\nimport { VData } from '../VData'\nimport { VDataFooter, VDataIterator } from '../VDataIterator'\nimport VBtn from '../VBtn'\nimport VDataTableHeader from './VDataTableHeader'\n// import VVirtualTable from './VVirtualTable'\nimport VIcon from '../VIcon'\nimport Row from './Row'\nimport RowGroup from './RowGroup'\nimport VSimpleCheckbox from '../VCheckbox/VSimpleCheckbox'\nimport VSimpleTable from './VSimpleTable'\nimport MobileRow from './MobileRow'\n\n// Mixins\nimport Loadable from '../../mixins/loadable'\n\n// Directives\nimport ripple from '../../directives/ripple'\n\n// Helpers\nimport mixins from '../../util/mixins'\nimport { deepEqual, getObjectValueByPath, getPrefixedScopedSlots, getSlot, defaultFilter, camelizeObjectKeys, getPropertyFromItem } from '../../util/helpers'\nimport { breaking } from '../../util/console'\nimport { mergeClasses } from '../../util/mergeData'\n\nfunction filterFn (item: any, search: string | null, filter: DataTableFilterFunction) {\n  return (header: DataTableHeader) => {\n    const value = getObjectValueByPath(item, header.value)\n    return header.filter ? header.filter(value, search, item) : filter(value, search, item)\n  }\n}\n\nfunction searchTableItems (\n  items: any[],\n  search: string | null,\n  headersWithCustomFilters: DataTableHeader[],\n  headersWithoutCustomFilters: DataTableHeader[],\n  customFilter: DataTableFilterFunction\n) {\n  search = typeof search === 'string' ? search.trim() : null\n\n  return items.filter(item => {\n    // Headers with custom filters are evaluated whether or not a search term has been provided.\n    // We need to match every filter to be included in the results.\n    const matchesColumnFilters = headersWithCustomFilters.every(filterFn(item, search, defaultFilter))\n\n    // Headers without custom filters are only filtered by the `search` property if it is defined.\n    // We only need a single column to match the search term to be included in the results.\n    const matchesSearchTerm = !search || headersWithoutCustomFilters.some(filterFn(item, search, customFilter))\n\n    return matchesColumnFilters && matchesSearchTerm\n  })\n}\n\n/* @vue/component */\nexport default mixins(\n  VDataIterator,\n  Loadable,\n).extend({\n  name: 'v-data-table',\n\n  // https://github.com/vuejs/vue/issues/6872\n  directives: {\n    ripple,\n  },\n\n  props: {\n    headers: {\n      type: Array,\n      default: () => [],\n    } as PropValidator<DataTableHeader[]>,\n    showSelect: Boolean,\n    checkboxColor: String,\n    showExpand: Boolean,\n    showGroupBy: Boolean,\n    // TODO: Fix\n    // virtualRows: Boolean,\n    height: [Number, String],\n    hideDefaultHeader: Boolean,\n    caption: String,\n    dense: Boolean,\n    headerProps: Object,\n    calculateWidths: Boolean,\n    fixedHeader: Boolean,\n    headersLength: Number,\n    expandIcon: {\n      type: String,\n      default: '$expand',\n    },\n    customFilter: {\n      type: Function,\n      default: defaultFilter,\n    } as PropValidator<typeof defaultFilter>,\n    itemClass: {\n      type: [String, Function],\n      default: () => '',\n    } as PropValidator<RowClassFunction | string>,\n    loaderHeight: {\n      type: [Number, String],\n      default: 4,\n    },\n  },\n\n  data () {\n    return {\n      internalGroupBy: [] as string[],\n      openCache: {} as { [key: string]: boolean },\n      widths: [] as number[],\n    }\n  },\n\n  computed: {\n    computedHeaders (): DataTableHeader[] {\n      if (!this.headers) return []\n      const headers = this.headers.filter(h => h.value === undefined || !this.internalGroupBy.find(v => v === h.value))\n      const defaultHeader = { text: '', sortable: false, width: '1px' }\n\n      if (this.showSelect) {\n        const index = headers.findIndex(h => h.value === 'data-table-select')\n        if (index < 0) headers.unshift({ ...defaultHeader, value: 'data-table-select' })\n        else headers.splice(index, 1, { ...defaultHeader, ...headers[index] })\n      }\n\n      if (this.showExpand) {\n        const index = headers.findIndex(h => h.value === 'data-table-expand')\n        if (index < 0) headers.unshift({ ...defaultHeader, value: 'data-table-expand' })\n        else headers.splice(index, 1, { ...defaultHeader, ...headers[index] })\n      }\n\n      return headers\n    },\n    colspanAttrs (): object | undefined {\n      return this.isMobile ? undefined : {\n        colspan: this.headersLength || this.computedHeaders.length,\n      }\n    },\n    columnSorters (): Record<string, DataTableCompareFunction> {\n      return this.computedHeaders.reduce<Record<string, DataTableCompareFunction>>((acc, header) => {\n        if (header.sort) acc[header.value] = header.sort\n        return acc\n      }, {})\n    },\n    headersWithCustomFilters (): DataTableHeader[] {\n      return this.headers.filter(header => header.filter && (!header.hasOwnProperty('filterable') || header.filterable === true))\n    },\n    headersWithoutCustomFilters (): DataTableHeader[] {\n      return this.headers.filter(header => !header.filter && (!header.hasOwnProperty('filterable') || header.filterable === true))\n    },\n    sanitizedHeaderProps (): Record<string, any> {\n      return camelizeObjectKeys(this.headerProps)\n    },\n    computedItemsPerPage (): number {\n      const itemsPerPage = this.options && this.options.itemsPerPage ? this.options.itemsPerPage : this.itemsPerPage\n      const itemsPerPageOptions: DataItemsPerPageOption[] | undefined = this.sanitizedFooterProps.itemsPerPageOptions\n\n      if (\n        itemsPerPageOptions &&\n        !itemsPerPageOptions.find(item => typeof item === 'number' ? item === itemsPerPage : item.value === itemsPerPage)\n      ) {\n        const firstOption = itemsPerPageOptions[0]\n        return typeof firstOption === 'object' ? firstOption.value : firstOption\n      }\n\n      return itemsPerPage\n    },\n  },\n\n  created () {\n    const breakingProps = [\n      ['sort-icon', 'header-props.sort-icon'],\n      ['hide-headers', 'hide-default-header'],\n      ['select-all', 'show-select'],\n    ]\n\n    /* istanbul ignore next */\n    breakingProps.forEach(([original, replacement]) => {\n      if (this.$attrs.hasOwnProperty(original)) breaking(original, replacement, this)\n    })\n  },\n\n  mounted () {\n    // if ((!this.sortBy || !this.sortBy.length) && (!this.options.sortBy || !this.options.sortBy.length)) {\n    //   const firstSortable = this.headers.find(h => !('sortable' in h) || !!h.sortable)\n    //   if (firstSortable) this.updateOptions({ sortBy: [firstSortable.value], sortDesc: [false] })\n    // }\n\n    if (this.calculateWidths) {\n      window.addEventListener('resize', this.calcWidths)\n      this.calcWidths()\n    }\n  },\n\n  beforeDestroy () {\n    if (this.calculateWidths) {\n      window.removeEventListener('resize', this.calcWidths)\n    }\n  },\n\n  methods: {\n    calcWidths () {\n      this.widths = Array.from(this.$el.querySelectorAll('th')).map(e => e.clientWidth)\n    },\n    customFilterWithColumns (items: any[], search: string) {\n      return searchTableItems(items, search, this.headersWithCustomFilters, this.headersWithoutCustomFilters, this.customFilter)\n    },\n    customSortWithHeaders (items: any[], sortBy: string[], sortDesc: boolean[], locale: string) {\n      return this.customSort(items, sortBy, sortDesc, locale, this.columnSorters)\n    },\n    createItemProps (item: any, index: number): DataTableItemProps {\n      const props = VDataIterator.options.methods.createItemProps.call(this, item, index)\n\n      return Object.assign(props, { headers: this.computedHeaders })\n    },\n    genCaption (props: DataScopeProps) {\n      if (this.caption) return [this.$createElement('caption', [this.caption])]\n\n      return getSlot(this, 'caption', props, true)\n    },\n    genColgroup (props: DataScopeProps) {\n      return this.$createElement('colgroup', this.computedHeaders.map(header => {\n        return this.$createElement('col', {\n          class: {\n            divider: header.divider,\n          },\n        })\n      }))\n    },\n    genLoading () {\n      const th = this.$createElement('th', {\n        staticClass: 'column',\n        attrs: this.colspanAttrs,\n      }, [this.genProgress()])\n\n      const tr = this.$createElement('tr', {\n        staticClass: 'v-data-table__progress',\n      }, [th])\n\n      return this.$createElement('thead', [tr])\n    },\n    genHeaders (props: DataScopeProps) {\n      const data = {\n        props: {\n          ...this.sanitizedHeaderProps,\n          headers: this.computedHeaders,\n          options: props.options,\n          mobile: this.isMobile,\n          showGroupBy: this.showGroupBy,\n          checkboxColor: this.checkboxColor,\n          someItems: this.someItems,\n          everyItem: this.everyItem,\n          singleSelect: this.singleSelect,\n          disableSort: this.disableSort,\n        },\n        on: {\n          sort: props.sort,\n          group: props.group,\n          'toggle-select-all': this.toggleSelectAll,\n        },\n      }\n\n      // TODO: rename to 'head'? (thead, tbody, tfoot)\n      const children: VNodeChildrenArrayContents = [getSlot(this, 'header', {\n        ...data,\n        isMobile: this.isMobile,\n      })]\n\n      if (!this.hideDefaultHeader) {\n        const scopedSlots = getPrefixedScopedSlots('header.', this.$scopedSlots)\n        children.push(this.$createElement(VDataTableHeader, {\n          ...data,\n          scopedSlots,\n        }))\n      }\n\n      if (this.loading) children.push(this.genLoading())\n\n      return children\n    },\n    genEmptyWrapper (content: VNodeChildrenArrayContents) {\n      return this.$createElement('tr', {\n        staticClass: 'v-data-table__empty-wrapper',\n      }, [\n        this.$createElement('td', {\n          attrs: this.colspanAttrs,\n        }, content),\n      ])\n    },\n    genItems (items: any[], props: DataScopeProps) {\n      const empty = this.genEmpty(props.originalItemsLength, props.pagination.itemsLength)\n      if (empty) return [empty]\n\n      return props.groupedItems\n        ? this.genGroupedRows(props.groupedItems, props)\n        : this.genRows(items, props)\n    },\n    genGroupedRows (groupedItems: ItemGroup<any>[], props: DataScopeProps) {\n      return groupedItems.map(group => {\n        if (!this.openCache.hasOwnProperty(group.name)) this.$set(this.openCache, group.name, true)\n\n        if (this.$scopedSlots.group) {\n          return this.$scopedSlots.group({\n            group: group.name,\n            options: props.options,\n            isMobile: this.isMobile,\n            items: group.items,\n            headers: this.computedHeaders,\n          })\n        } else {\n          return this.genDefaultGroupedRow(group.name, group.items, props)\n        }\n      })\n    },\n    genDefaultGroupedRow (group: string, items: any[], props: DataScopeProps) {\n      const isOpen = !!this.openCache[group]\n      const children: VNodeChildren = [\n        this.$createElement('template', { slot: 'row.content' }, this.genRows(items, props)),\n      ]\n      const toggleFn = () => this.$set(this.openCache, group, !this.openCache[group])\n      const removeFn = () => props.updateOptions({ groupBy: [], groupDesc: [] })\n\n      if (this.$scopedSlots['group.header']) {\n        children.unshift(this.$createElement('template', { slot: 'column.header' }, [\n          this.$scopedSlots['group.header']!({\n            group,\n            groupBy: props.options.groupBy,\n            isMobile: this.isMobile,\n            items,\n            headers: this.computedHeaders,\n            isOpen,\n            toggle: toggleFn,\n            remove: removeFn,\n          }),\n        ]))\n      } else {\n        const toggle = this.$createElement(VBtn, {\n          staticClass: 'ma-0',\n          props: {\n            icon: true,\n            small: true,\n          },\n          on: {\n            click: toggleFn,\n          },\n        }, [this.$createElement(VIcon, [isOpen ? '$minus' : '$plus'])])\n\n        const remove = this.$createElement(VBtn, {\n          staticClass: 'ma-0',\n          props: {\n            icon: true,\n            small: true,\n          },\n          on: {\n            click: removeFn,\n          },\n        }, [this.$createElement(VIcon, ['$close'])])\n\n        const column = this.$createElement('td', {\n          staticClass: 'text-start',\n          attrs: this.colspanAttrs,\n        }, [toggle, `${props.options.groupBy[0]}: ${group}`, remove])\n\n        children.unshift(this.$createElement('template', { slot: 'column.header' }, [column]))\n      }\n\n      if (this.$scopedSlots['group.summary']) {\n        children.push(this.$createElement('template', { slot: 'column.summary' }, [\n          this.$scopedSlots['group.summary']!({\n            group,\n            groupBy: props.options.groupBy,\n            isMobile: this.isMobile,\n            items,\n            headers: this.computedHeaders,\n            isOpen,\n            toggle: toggleFn,\n          }),\n        ]))\n      }\n\n      return this.$createElement(RowGroup, {\n        key: group,\n        props: {\n          value: isOpen,\n        },\n      }, children)\n    },\n    genRows (items: any[], props: DataScopeProps) {\n      return this.$scopedSlots.item ? this.genScopedRows(items, props) : this.genDefaultRows(items, props)\n    },\n    genScopedRows (items: any[], props: DataScopeProps) {\n      const rows = []\n\n      for (let i = 0; i < items.length; i++) {\n        const item = items[i]\n        rows.push(this.$scopedSlots.item!({\n          ...this.createItemProps(item, i),\n          isMobile: this.isMobile,\n        }))\n\n        if (this.isExpanded(item)) {\n          rows.push(this.$scopedSlots['expanded-item']!({\n            headers: this.computedHeaders,\n            isMobile: this.isMobile,\n            index: i,\n            item,\n          }))\n        }\n      }\n\n      return rows\n    },\n    genDefaultRows (items: any[], props: DataScopeProps) {\n      return this.$scopedSlots['expanded-item']\n        ? items.map((item, index) => this.genDefaultExpandedRow(item, index))\n        : items.map((item, index) => this.genDefaultSimpleRow(item, index))\n    },\n    genDefaultExpandedRow (item: any, index: number): VNode {\n      const isExpanded = this.isExpanded(item)\n      const classes = {\n        'v-data-table__expanded v-data-table__expanded__row': isExpanded,\n      }\n      const headerRow = this.genDefaultSimpleRow(item, index, classes)\n      const expandedRow = this.$createElement('tr', {\n        staticClass: 'v-data-table__expanded v-data-table__expanded__content',\n      }, [this.$scopedSlots['expanded-item']!({\n        headers: this.computedHeaders,\n        isMobile: this.isMobile,\n        item,\n      })])\n\n      return this.$createElement(RowGroup, {\n        props: {\n          value: isExpanded,\n        },\n      }, [\n        this.$createElement('template', { slot: 'row.header' }, [headerRow]),\n        this.$createElement('template', { slot: 'row.content' }, [expandedRow]),\n      ])\n    },\n    genDefaultSimpleRow (item: any, index: number, classes: Record<string, boolean> = {}): VNode {\n      const scopedSlots = getPrefixedScopedSlots('item.', this.$scopedSlots)\n\n      const data = this.createItemProps(item, index)\n\n      if (this.showSelect) {\n        const slot = scopedSlots['data-table-select']\n        scopedSlots['data-table-select'] = slot ? () => slot({\n          ...data,\n          isMobile: this.isMobile,\n        }) : () => this.$createElement(VSimpleCheckbox, {\n          staticClass: 'v-data-table__checkbox',\n          props: {\n            value: data.isSelected,\n            disabled: !this.isSelectable(item),\n            color: this.checkboxColor ?? '',\n          },\n          on: {\n            input: (val: boolean) => data.select(val),\n          },\n        })\n      }\n\n      if (this.showExpand) {\n        const slot = scopedSlots['data-table-expand']\n        scopedSlots['data-table-expand'] = slot ? () => slot(data) : () => this.$createElement(VIcon, {\n          staticClass: 'v-data-table__expand-icon',\n          class: {\n            'v-data-table__expand-icon--active': data.isExpanded,\n          },\n          on: {\n            click: (e: MouseEvent) => {\n              e.stopPropagation()\n              data.expand(!data.isExpanded)\n            },\n          },\n        }, [this.expandIcon])\n      }\n\n      return this.$createElement(this.isMobile ? MobileRow : Row, {\n        key: getObjectValueByPath(item, this.itemKey),\n        class: mergeClasses(\n          { ...classes, 'v-data-table__selected': data.isSelected },\n          getPropertyFromItem(item, this.itemClass)\n        ),\n        props: {\n          headers: this.computedHeaders,\n          hideDefaultHeader: this.hideDefaultHeader,\n          index,\n          item,\n          rtl: this.$vuetify.rtl,\n        },\n        scopedSlots,\n        on: {\n          // TODO: for click, the first argument should be the event, and the second argument should be data,\n          // but this is a breaking change so it's for v3\n          click: () => this.$emit('click:row', item, data),\n          contextmenu: (event: MouseEvent) => this.$emit('contextmenu:row', event, data),\n          dblclick: (event: MouseEvent) => this.$emit('dblclick:row', event, data),\n        },\n      })\n    },\n    genBody (props: DataScopeProps): VNode | string | VNodeChildren {\n      const data = {\n        ...props,\n        expand: this.expand,\n        headers: this.computedHeaders,\n        isExpanded: this.isExpanded,\n        isMobile: this.isMobile,\n        isSelected: this.isSelected,\n        select: this.select,\n      }\n\n      if (this.$scopedSlots.body) {\n        return this.$scopedSlots.body!(data)\n      }\n\n      return this.$createElement('tbody', [\n        getSlot(this, 'body.prepend', data, true),\n        this.genItems(props.items, props),\n        getSlot(this, 'body.append', data, true),\n      ])\n    },\n    genFoot (props: DataScopeProps): VNode[] | undefined {\n      return this.$scopedSlots.foot?.(props)\n    },\n    genFooters (props: DataScopeProps) {\n      const data = {\n        props: {\n          options: props.options,\n          pagination: props.pagination,\n          itemsPerPageText: '$vuetify.dataTable.itemsPerPageText',\n          ...this.sanitizedFooterProps,\n        },\n        on: {\n          'update:options': (value: any) => props.updateOptions(value),\n        },\n        widths: this.widths,\n        headers: this.computedHeaders,\n      }\n\n      const children: VNodeChildren = [\n        getSlot(this, 'footer', data, true),\n      ]\n\n      if (!this.hideDefaultFooter) {\n        children.push(this.$createElement(VDataFooter, {\n          ...data,\n          scopedSlots: getPrefixedScopedSlots('footer.', this.$scopedSlots),\n        }))\n      }\n\n      return children\n    },\n    genDefaultScopedSlot (props: DataScopeProps): VNode {\n      const simpleProps = {\n        height: this.height,\n        fixedHeader: this.fixedHeader,\n        dense: this.dense,\n      }\n\n      // if (this.virtualRows) {\n      //   return this.$createElement(VVirtualTable, {\n      //     props: Object.assign(simpleProps, {\n      //       items: props.items,\n      //       height: this.height,\n      //       rowHeight: this.dense ? 24 : 48,\n      //       headerHeight: this.dense ? 32 : 48,\n      //       // TODO: expose rest of props from virtual table?\n      //     }),\n      //     scopedSlots: {\n      //       items: ({ items }) => this.genItems(items, props) as any,\n      //     },\n      //   }, [\n      //     this.proxySlot('body.before', [this.genCaption(props), this.genHeaders(props)]),\n      //     this.proxySlot('bottom', this.genFooters(props)),\n      //   ])\n      // }\n\n      return this.$createElement(VSimpleTable, {\n        props: simpleProps,\n        class: {\n          'v-data-table--mobile': this.isMobile,\n        },\n      }, [\n        this.proxySlot('top', getSlot(this, 'top', {\n          ...props,\n          isMobile: this.isMobile,\n        }, true)),\n        this.genCaption(props),\n        this.genColgroup(props),\n        this.genHeaders(props),\n        this.genBody(props),\n        this.genFoot(props),\n        this.proxySlot('bottom', this.genFooters(props)),\n      ])\n    },\n    proxySlot (slot: string, content: VNodeChildren) {\n      return this.$createElement('template', { slot }, content)\n    },\n  },\n\n  render (): VNode {\n    return this.$createElement(VData, {\n      props: {\n        ...this.$props,\n        customFilter: this.customFilterWithColumns,\n        customSort: this.customSortWithHeaders,\n        itemsPerPage: this.computedItemsPerPage,\n      },\n      on: {\n        'update:options': (v: DataOptions, old: DataOptions) => {\n          this.internalGroupBy = v.groupBy || []\n          !deepEqual(v, old) && this.$emit('update:options', v)\n        },\n        'update:page': (v: number) => this.$emit('update:page', v),\n        'update:items-per-page': (v: number) => this.$emit('update:items-per-page', v),\n        'update:sort-by': (v: string | string[]) => this.$emit('update:sort-by', v),\n        'update:sort-desc': (v: boolean | boolean[]) => this.$emit('update:sort-desc', v),\n        'update:group-by': (v: string | string[]) => this.$emit('update:group-by', v),\n        'update:group-desc': (v: boolean | boolean[]) => this.$emit('update:group-desc', v),\n        pagination: (v: DataPagination, old: DataPagination) => !deepEqual(v, old) && this.$emit('pagination', v),\n        'current-items': (v: any[]) => {\n          this.internalCurrentItems = v\n          this.$emit('current-items', v)\n        },\n        'page-count': (v: number) => this.$emit('page-count', v),\n      },\n      scopedSlots: {\n        default: this.genDefaultScopedSlot,\n      },\n    })\n  },\n})\n"]},"metadata":{},"sourceType":"module"}